class GraphModal{constructor(t){this.options=Object.assign({isOpen:()=>{},isClose:()=>{}},t),this.modal=document.querySelector(".modal"),this.speed=300,this.animation=!1,this.reOpen=!1,this.nextWindow=!1,this.modalContainer=!1,this.isOpened=!1,this.previousActiveElement=!1,this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.fixBlocks=document.querySelectorAll(".fix-block"),this.events()}events(){document.addEventListener("click",function(t){const e=t.target.closest("[data-graph-path]");if(e){let t=e.dataset.graphPath,i=e.dataset.graphAnimation,s=e.dataset.graphSpeed;return this.animation=i||"fade",this.speed=s?parseInt(s):300,this.nextWindow=document.querySelector(`[data-graph-target="${t}"]`),void this.open()}t.target.closest(".modal__close")&&this.close()}.bind(this)),window.addEventListener("keydown",function(t){27==t.keyCode&&this.modalContainer.classList.contains("modal-open")&&this.close(),9==t.which&&this.isOpened&&this.focusCatch(t)}.bind(this)),this.modal.addEventListener("click",function(t){t.target.classList.contains("modal__container")||t.target.closest(".modal__container")||!this.isOpened||this.close()}.bind(this))}open(t){if(this.previousActiveElement=document.activeElement,this.isOpened)return this.reOpen=!0,void this.close();this.modalContainer=this.nextWindow,t&&(this.modalContainer=document.querySelector(`[data-graph-target="${t}"]`)),this.modal.style.setProperty("--transition-time",this.speed/1e3+"s"),this.modal.classList.add("is-open"),this.disableScroll(),this.modalContainer.classList.add("modal-open"),this.modalContainer.classList.add(this.animation),setTimeout((()=>{this.options.isOpen(this),this.modalContainer.classList.add("animate-open"),this.isOpened=!0,this.focusTrap()}),this.speed)}close(){this.modalContainer&&(this.modalContainer.classList.remove("animate-open"),this.modalContainer.classList.remove(this.animation),this.modal.classList.remove("is-open"),this.modalContainer.classList.remove("modal-open"),this.enableScroll(),this.options.isClose(this),this.isOpened=!1,this.focusTrap(),this.reOpen&&(this.reOpen=!1,this.open()))}focusCatch(t){const e=this.modalContainer.querySelectorAll(this._focusElements),i=Array.prototype.slice.call(e),s=i.indexOf(document.activeElement);t.shiftKey&&0===s&&(i[i.length-1].focus(),t.preventDefault()),t.shiftKey||s!==i.length-1||(i[0].focus(),t.preventDefault())}focusTrap(){const t=this.modalContainer.querySelectorAll(this._focusElements);this.isOpened?t.length&&t[0].focus():this.previousActiveElement.focus()}disableScroll(){let t=window.scrollY;this.lockPadding(),document.body.classList.add("disable-scroll"),document.body.dataset.position=t,document.body.style.top=-t+"px"}enableScroll(){let t=parseInt(document.body.dataset.position,10);this.unlockPadding(),document.body.style.top="auto",document.body.classList.remove("disable-scroll"),window.scroll({top:t,left:0}),document.body.removeAttribute("data-position")}lockPadding(){let t=window.innerWidth-document.body.offsetWidth+"px";this.fixBlocks.forEach((e=>{e.style.paddingRight=t})),document.body.style.paddingRight=t}unlockPadding(){this.fixBlocks.forEach((t=>{t.style.paddingRight="0px"})),document.body.style.paddingRight="0px"}}